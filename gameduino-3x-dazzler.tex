\documentclass{article}

\usepackage{booktabs}
\usepackage{fancyhdr}
\usepackage{float}
\usepackage{graphicx}
\usepackage{helvet}
\usepackage{hyperref}
\usepackage{tabularx}
\usepackage{xcolor}
\usepackage{wasysym}
\usepackage{color, colortbl}

\usepackage{listings}
\usepackage{tikz}
\usepackage{tikz-dimline}

\usetikzlibrary{shapes,arrows,positioning}

\usepackage{makeidx}         % allows index generation
\makeindex

\lstset{frame=tblr,
  rulecolor=\color{lightgray},
  language=Java,
  aboveskip=5mm,
  belowskip=5mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle=\linespread{1.0}\small\ttfamily,
  numbers=none,
  % numberstyle=\tiny\color{gray},
  % keywordstyle=\color{blue},
  % commentstyle=\color{dkgreen},
  % stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
}

\usepackage{framed}     % These needed for the code formatter
\usepackage{color}
\usepackage{fancyvrb}

% Use helvetica (sans) by default
\renewcommand{\familydefault}{\sfdefault}

% Greenish links
\hypersetup{
  colorlinks=true,
  linkcolor=blue!50!red,
  urlcolor=blue!50!red
}

\setlength{\headheight}{40pt}
\setlength{\headsep}{0.2in}

\pagestyle{fancy}
\lhead{\includegraphics[width=0.2\textwidth]{img/logo}}
\chead{Gameduino 3X Dazzler}
\rhead{\thepage}
\cfoot{\textcopyright \ \the\year \ \ Excamera Labs}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0.5pt}

\usepackage{array}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\usepackage{setspace}

\newcommand{\device}{Gameduino 3X Dazzler}
\newcommand{\dev}{Dazzler}

\newcommand{\heavyline}{\specialrule{1pt}{1pt}{1pt}}
\newcommand{\png}[1]{
\begin{figure}[H]
\begin{center}
\includegraphics[width=0.75\textwidth]{#1}
\end{center}
\end{figure}
}
\newcommand{\pngw}[2]{
\begin{figure}[H]
\begin{center}
\includegraphics[width=#2\textwidth]{#1}
\end{center}
\end{figure}
}

\newcommand{\mach}[1]{\texttt{\textbf{#1}}}
\newcommand{\gap}{\vspace{10pt}}

\input{pyg.tex}

\begin{document}

\newpage
\begin{center}
\includegraphics[width=1.00\textwidth]{img/gameduino-3x-dazzler/gameduino-3x-dazzler-main}
Last updated on \today
\end{center}
\tableofcontents

\newpage

\setlength{\parindent}{0mm}
\setlength{\parskip}{1mm}
\setstretch{1.4}

\section{Overview}

\png{img/gameduino-3x-dazzler/module}

The \device{} outputs HD picture and sound to any HDMI display.

It is available as a core module, and as an Arduino-compatible shield.

\subsection{Features}

The core module has the following features:

\begin{itemize}
\item Powerful BT815 embedded GPU with 24 bit color
\item HDMI encoding and system management handled by Xilinx Spartan-6 LX9 FPGA
\item 2 $\times$ 8 Megabyte flash
\item HDMI video output at 1280x720 @ 60 Hz (720p), audio output at 48 KHz
\item All features accessible via SPI interface
\item Single 5V supply; onboard regulation to 3.3V and 1.2V
\end{itemize}

\noindent
The shield adds:
\begin{itemize}
\item a level shifter so all inputs are 5V tolerant
\item a microSD card slot
\item 2 Wii Classic ports, both continuously scanned by the Dazzler
\item optional headers for standard serial and JTAG connectors
\end{itemize}

\png{img/gameduino-3x-dazzler/rot-0182}

\newpage
\section{Getting Started}

On power-up, the \dev{} displays a boot screen like this:

\pngw{img/gameduino-3x-dazzler/boot}{1.0}

The code on the left is the module's serial number. \index{serial number}
The center code is the firmware version. \index{firmware version}
On the right is the firmware build date.

\pngw{img/gameduino-3x-dazzler/helloworld}{1.0}

\subsection{WII controllers}

XXX

\newpage
\section{Text mode}

XXX

\section{Dazzler SPI protocol}

XXX

\newpage
\section{Pinouts}

\newcommand{\activelow}[1]{$\overline{\mbox{#1}}$}

\subsection{Shield}
The Dazzler Shield follows the standard Arduino Uno pinout.

\gap
\begin{center}
\begin{tabular}{ccl}
\hline
GND	& power & Signal ground \\
5V	& power	& Main supply: 5-9V \\
\\
13	& in	& SPI SCK \\
12	& out	& SPI MISO \\
11	& in	& SPI MOSI \\
\\
10	& in	& DAZZLER SEL \\
9	& in	& SD SEL \\
8	& in	& GPU SEL \\
\\
2	& out	& INTERRUPT \\
1	& in 	& SERIAL IN \\
\hline
\end{tabular}
\end{center}
\gap

All other pins are pass-through.

\subsection{Module}

\pngw{img/gameduino-3x-dazzler/pinout}{1.0}

\gap
\begin{center}
\begin{tabular}{cccl}
\textbf{pin} & \textbf{group} & \textbf{direction} & \textbf{function} \\
\hline
GND	& power & in & Signal ground \\
5V	& power	& in & Main supply: 5-9 V \\
\\
3.3	& power	& out & 3.3 V output (50 mA max)\\
\\
1       & console & in    & CONSOLE IN \\
2       & console & out   & CONSOLE OUT \\
\\
17      & microSD & in    & SD MISO \\
18      & microSD & out   & SD SCK \\
19      & microSD & out   & SD MOSI \\
20      & microSD & out   & SD CS \\
\\
22	& SPI     & out   & MISO \\
25	& SPI     & in    & \activelow{GPU SEL} \\
26	& SPI     & in    & \activelow{SD SEL} \\
27	& SPI     & in    & \activelow{DAZZLER SEL} \\
28	& SPI     & in    & MOSI \\
29	& SPI     & in    & SCK \\
\hline
\end{tabular}
\end{center}
\gap

\newpage
\section{Internals}

\subsection{The onboard CPU}


\tikzstyle{block} = [draw, fill=white, rectangle, minimum height=40mm, minimum width=20mm]
\tikzstyle{sum} = [draw, fill=blue!20, circle, node distance=1cm]
\tikzstyle{input} = [coordinate]
\tikzstyle{output} = [coordinate]
\tikzstyle{pinstyle} = [pin edge={to-,thin,black}]


% The block diagram code is probably more verbose than necessary
\begin{center}
\begin{tikzpicture}[node distance=2cm,>=latex']
    % We start by placing the blocks
    \node [block] (FPGA) {FPGA};
\end{tikzpicture}
\end{center}

\newpage
\section{Specifications}\label{electrical-characteristics}

\subsection{DC characteristics}
\vspace{10 pt}
{\renewcommand{\arraystretch}{1.2}% for the vertical padding

\begin{tabularx}{\linewidth}{XC{40pt}C{40pt}C{40pt}C{40pt}}
& min & typ & max & units \\ \heavyline

All inputs signals & & & & \\
\hspace{10pt}low voltage & -0.5 & & 0.8 & V \\
\hspace{10pt}high voltage & 2.0 &   & 4.1 & V \\ \hline
Supply voltage        & 4.5 & 5.0 & 9.0 & V                   \\ \hline
Current consumption   & & 180 & & mA                   \\ \hline

\end{tabularx}}
\vspace{10 pt}

\subsection{AC characteristics}
\vspace{10 pt}

{\renewcommand{\arraystretch}{1.2}% for the vertical padding
\begin{tabularx}{\linewidth}{XC{40pt}C{40pt}C{40pt}C{40pt}}
& min & typ & max & units \\ \heavyline

SPI speed                     & & & 36 & Mbps   \index{speed!SPI}\\ \hline
Startup time & & & 270 & ms \\ \hline
Scanout frequency & & 74.25 $\pm$ 0.002\%  & & MHz  \\ \hline
Scanout frame rate & & 60.000 & & Hz  \\ \hline
\end{tabularx}}
\vspace{10 pt}

\subsection{Physical characteristics}
\vspace{10 pt}

{\renewcommand{\arraystretch}{1.2}% for the vertical padding
\begin{tabularx}{\linewidth}{XC{120pt}C{40pt}}
& & units \\ \heavyline

Dimensions (shield)           & 83 $\times$ 53 $\times$ 20 & mm   \index{dimensions}\\ \hline
Weight (shield)               & 32 & g   \index{weight}\\ \hline
Dimensions (module)           & 50 $\times$ 42 $\times$ 8.5 & mm   \index{dimensions}\\ \hline
Weight (module)               & 10 & g   \index{weight}\\ \hline

\end{tabularx}}
\vspace{10 pt}

\subsection{Module mechanical drawing}

All measurements are in mm.

The three mounting holes are designed for M2.5 screws, nuts and standoffs.

\begin{center}
\begin{tikzpicture}[scale=1.7]
\input{dazzler.tikz}
    \coordinate (A) at (0,5);
    \coordinate (B) at (5,5);
    \dimline {(A)}{(B)}{50};
    \coordinate (C) at (5.8,4.2);
    \coordinate (D) at (5.8,0);
    \dimline {(C)}{(D)}{42};

    \coordinate (E) at (0,-0.7);
    \coordinate (F) at (.28,-0.7);
    \coordinate (G) at (4.72,-0.7);
    \coordinate (H) at (5,-0.7);
    \dimline [label style={below=0.5ex,font=\small}] {(F)}{(E)}{2.8};
    \dimline {(G)}{(F)}{44.4};
    \dimline [label style={below=0.5ex,font=\small}]{(H)}{(G)}{2.8};

    \coordinate (I) at (-0.7,0);
    \coordinate (J) at (-0.7,.28);
    \coordinate (K) at (-0.7,3.92);
    \coordinate (L) at (-0.7,4.20);
    \dimline [label style={above=0.5ex,font=\small}] {(I)}{(J)}{2.8};
    \dimline {(J)}{(K)}{36.4};
    \dimline [label style={above=0.5ex,font=\small}]{(K)}{(L)}{2.8};

    \dimline  [label style={above=0.5ex,font=\scriptsize},line style={arrows=dimline reverse-dimline reverse}]
    {(.28-.125,1.3)}{(.28+.125,1.3)}{$\diameter$ 2.5};
\end{tikzpicture}
\end{center}

\newpage
\section{Troubleshooting}

\gap
\begin{tabular}{|l|l|}
\hline
No monitor output after power-up     & $\bullet$ Check HDMI cable and port \\
                                     & $\bullet$ Confirm 5V power present \\
                                     & $\bullet$ Return for replacement \\
\hline
No audio output                      & $\bullet$ Confirm the display has audio output \\
                                     & $\bullet$ Check the display's mute and volume settings \\
\hline
\end{tabular}
\gap

\section{Support information}

Technical and product support is available at
\href{mailto:jamesb@excamera.com}{jamesb@excamera.com}

\device{} is built and maintained by
\href{https://excamera.com}{Excamera Labs}.


\newpage
\raggedright
\addcontentsline{toc}{section}{Index}
\renewcommand{\indexname}{Index}
\printindex

\end{document}
